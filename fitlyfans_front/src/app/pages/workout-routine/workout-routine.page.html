<!-- Página izquierda: Crear rutina -->
<div class="page-container" *ngIf="!showRoutineDetails">
  <ion-header class="ion-no-border">
    <ion-toolbar color="dark">
      <ion-buttons slot="start">
        <ion-button>
          <ion-icon name="arrow-back-outline"></ion-icon>
        </ion-button>
      </ion-buttons>
      <ion-title>Crear Rutina</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-content color="dark">
    <div class="main-container">
      <!-- Sección 1: Detalles de la rutina -->
      <div class="section">
        <div class="section-header">
          <span class="section-number">1</span>
          <h3>Detalles de la Rutina</h3>
        </div>

        <div class="form-group">
          <ion-label>Nombre</ion-label>
          <ion-input [(ngModel)]="routineName" placeholder="Explosión de Cuerpo Completo"></ion-input>
        </div>

        <div class="form-group">
          <ion-textarea
            [(ngModel)]="routineDescription"
            placeholder="Entrenamiento de alta intensidad que trabaja todos los grupos musculares principales"
            rows="2"
          ></ion-textarea>
        </div>

        <div class="form-group">
          <ion-label>Dificultad</ion-label>
          <div class="difficulty-selector">
            <ion-segment [(ngModel)]="difficulty" color="success">
              <ion-segment-button value="beginner">
                <ion-label>Principiante</ion-label>
              </ion-segment-button>
              <ion-segment-button value="intermediate">
                <ion-label>Intermedio</ion-label>
              </ion-segment-button>
              <ion-segment-button value="advanced">
                <ion-label>Avanzado</ion-label>
              </ion-segment-button>
            </ion-segment>
          </div>
        </div>

        <ion-item color="dark" detail lines="full" button>
          <ion-label>Categoría</ion-label>
          <ion-icon name="chevron-forward" slot="end"></ion-icon>
        </ion-item>
      </div>

      <!-- Sección 2: Añadir ejercicios -->
      <div class="section">
        <div class="section-header">
          <span class="section-number">2</span>
          <h3>Agregar Ejercicios</h3>
        </div>

        <div class="search-box">
          <ion-searchbar placeholder="Buscar ejercicios" color="dark"></ion-searchbar>
        </div>

        <ion-item color="dark" lines="full" button class="create-new" routerLink="/create-exercise">
          <ion-icon name="add" slot="start"></ion-icon>
          <ion-label>Crear Nuevo Ejercicio</ion-label>
        </ion-item>

        <!-- Lista dinámica de ejercicios con checkbox -->
        <div class="exercise-list">
          <ion-item
            color="dark"
            lines="full"
            button
            class="exercise-item"
            *ngFor="let ejercicio of ejercicios"
            (click)="toggleSeleccion(ejercicio)"
            [class.selected]="ejercicio.seleccionado"
          >
            <ion-thumbnail slot="start">
              <img [src]="'assets/images/' + ejercicio.imagen" [alt]="ejercicio.nombre">
            </ion-thumbnail>
            <ion-label>
              <h4>{{ ejercicio.nombre }}</h4>
              <p>{{ ejercicio.duracion }}</p>
            </ion-label>
            <ion-checkbox slot="end" [(ngModel)]="ejercicio.seleccionado" color="success"></ion-checkbox>
          </ion-item>
        </div>
      </div>

      <!-- Botón guardar -->
      <ion-button
        expand="block"
        color="success"
        class="next-button"
        (click)="guardarRutina()"
      >
        Guardar Rutina
      </ion-button>
    </div>
  </ion-content>
</div>
